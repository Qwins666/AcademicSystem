{"version":3,"file":"js/127.3e2915ce.js","mappings":"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","sources":["webpack://academic-management-frontend/./src/views/achievement/AchievementDetail.vue","webpack://academic-management-frontend/./src/views/achievement/AchievementDetail.vue?5394"],"sourcesContent":["<template>\n  <div class=\"achievement-detail\">\n    <div class=\"page-header\">\n      <h2>成果详情</h2>\n      <el-button type=\"primary\" @click=\"handleBack\">返回列表</el-button>\n    </div>\n    \n    <div v-if=\"loading\" class=\"loading-container\">\n      <el-skeleton :rows=\"10\" animated />\n    </div>\n    \n    <div class=\"detail-card\" v-else-if=\"achievement\">\n      <el-card shadow=\"hover\">\n        <template #header>\n          <div class=\"card-header\">\n            <h3>{{ achievement.title }}</h3>\n            <div class=\"status-tag\">\n              <el-tag :type=\"getStatusTag(achievement.status)\">{{ getStatusName(achievement.status) }}</el-tag>\n            </div>\n          </div>\n        </template>\n        \n        <div class=\"detail-content\">\n          <div class=\"info-row\">\n            <span class=\"label\">成果类型：</span>\n            <el-tag :type=\"getTypeTag(achievement.type)\">{{ getTypeName(achievement.type) }}</el-tag>\n          </div>\n          \n          <div class=\"info-row\">\n            <span class=\"label\">级别：</span>\n            <el-tag v-if=\"achievement.level\" :type=\"getLevelTag(achievement.level)\">{{ getLevelName(achievement.level) }}</el-tag>\n            <span v-else>-</span>\n          </div>\n          \n          <div class=\"info-row\">\n            <span class=\"label\">提交者：</span>\n            <span class=\"value\">{{ achievement.submitterName || '未知' }}</span>\n          </div>\n          \n          <div class=\"info-row\">\n            <span class=\"label\">提交时间：</span>\n            <span class=\"value\">{{ formatDateTime(achievement.createTime) }}</span>\n          </div>\n          \n          <div class=\"info-row\">\n            <span class=\"label\">成果描述：</span>\n            <div class=\"value description\">{{ achievement.description || '-' }}</div>\n          </div>\n          \n          <div class=\"info-row\">\n            <span class=\"label\">相关附件：</span>\n            <div class=\"value\">\n              <template v-if=\"achievement.fileUrl\">\n                <el-button \n                  type=\"primary\" \n                  size=\"small\" \n                  @click=\"handleDownload\"\n                  icon=\"DocumentDownload\"\n                >\n                  下载附件\n                </el-button>\n              </template>\n              <span v-else>-</span>\n            </div>\n          </div>\n          \n          <!-- 审核信息 -->\n          <div v-if=\"showApprovalInfo\" class=\"approval-info\">\n            <h4>审核信息</h4>\n            \n            <!-- 初审信息 -->\n            <div class=\"approval-section\" v-if=\"achievement.firstApproval\">\n              <div class=\"approval-title\">初审：</div>\n              <div class=\"approval-content\">\n                <div class=\"approval-item\">\n                  <span class=\"approval-label\">审核结果：</span>\n                  <el-tag :type=\"achievement.firstApproval.approved ? 'success' : 'danger'\">\n                    {{ achievement.firstApproval.approved ? '通过' : '驳回' }}\n                  </el-tag>\n                </div>\n                <div class=\"approval-item\">\n                  <span class=\"approval-label\">审核意见：</span>\n                  <span class=\"approval-value\">{{ achievement.firstApproval.comment || '-' }}</span>\n                </div>\n                <div class=\"approval-item\">\n                  <span class=\"approval-label\">审核时间：</span>\n                  <span class=\"approval-value\">{{ formatDateTime(achievement.firstApproval.approvalTime) }}</span>\n                </div>\n                <div class=\"approval-item\">\n                  <span class=\"approval-label\">审核人：</span>\n                  <span class=\"approval-value\">{{ achievement.firstApproval.approverName || '未知' }}</span>\n                </div>\n              </div>\n            </div>\n            \n            <!-- 终审信息 -->\n            <div class=\"approval-section\" v-if=\"achievement.finalApproval\">\n              <div class=\"approval-title\">终审：</div>\n              <div class=\"approval-content\">\n                <div class=\"approval-item\">\n                  <span class=\"approval-label\">审核结果：</span>\n                  <el-tag :type=\"achievement.finalApproval.approved ? 'success' : 'danger'\">\n                    {{ achievement.finalApproval.approved ? '通过' : '驳回' }}\n                  </el-tag>\n                </div>\n                <div class=\"approval-item\">\n                  <span class=\"approval-label\">审核意见：</span>\n                  <span class=\"approval-value\">{{ achievement.finalApproval.comment || '-' }}</span>\n                </div>\n                <div class=\"approval-item\">\n                  <span class=\"approval-label\">审核时间：</span>\n                  <span class=\"approval-value\">{{ formatDateTime(achievement.finalApproval.approvalTime) }}</span>\n                </div>\n                <div class=\"approval-item\">\n                  <span class=\"approval-label\">审核人：</span>\n                  <span class=\"approval-value\">{{ achievement.finalApproval.approverName || '未知' }}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </el-card>\n    </div>\n    \n    <div v-else class=\"empty-container\">\n      <el-empty description=\"未找到成果信息\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted, computed } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { useStore } from 'vuex'\nimport { ElMessage } from 'element-plus'\nimport request from '@/api/request'\n\nexport default {\n  name: 'AchievementDetail',\n  setup() {\n    const router = useRouter()\n    const route = useRoute()\n    const store = useStore()\n    \n    const loading = ref(true)\n    const achievement = ref(null)\n    const userCache = ref(new Map()) // 用户信息缓存\n    \n    const userRole = computed(() => store.getters.userRole)\n    const userId = computed(() => store.getters.user?.id)\n    \n    // 显示审核信息的条件\n    const showApprovalInfo = computed(() => {\n      // 只有管理员、教师或提交者可以查看审核信息\n      return userRole.value === 'ADMIN' || \n             userRole.value === 'TEACHER' || \n             (achievement.value && achievement.value.submitterId === userId.value)\n    })\n    \n    // 格式化日期时间\n    const formatDateTime = (dateTime) => {\n      if (!dateTime) return '-'\n      const date = new Date(dateTime)\n      if (isNaN(date.getTime())) return dateTime\n      return date.toLocaleString('zh-CN', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit'\n      })\n    }\n    \n    // 获取类型名称\n    const getTypeName = (type) => {\n      const typeMap = {\n        'PAPER': '论文',\n        'PATENT': '专利',\n        'CERTIFICATE': '证书',\n        'PROJECT': '项目'\n      }\n      return typeMap[type] || type\n    }\n    \n    // 获取类型标签\n    const getTypeTag = (type) => {\n      const tagMap = {\n        'PAPER': 'primary',\n        'PATENT': 'success',\n        'CERTIFICATE': 'warning',\n        'PROJECT': 'info'\n      }\n      return tagMap[type] || 'info'\n    }\n    \n    // 获取级别名称\n    const getLevelName = (level) => {\n      const levelMap = {\n        'NATIONAL': '国家级',\n        'PROVINCIAL': '省级',\n        'SCHOOL': '校级'\n      }\n      return levelMap[level] || level\n    }\n    \n    // 获取级别标签\n    const getLevelTag = (level) => {\n      const tagMap = {\n        'NATIONAL': 'danger',\n        'PROVINCIAL': 'warning',\n        'SCHOOL': 'success'\n      }\n      return tagMap[level] || 'info'\n    }\n    \n    // 获取状态名称\n    const getStatusName = (status) => {\n      const statusMap = {\n        'PENDING': '待审核',\n        'PENDING_FINAL': '待终审',\n        'APPROVED': '已通过',\n        'REJECTED': '已驳回'\n      }\n      return statusMap[status] || status\n    }\n    \n    // 获取状态标签\n    const getStatusTag = (status) => {\n      const tagMap = {\n        'PENDING': 'warning',\n        'PENDING_FINAL': 'success',\n        'APPROVED': 'success',\n        'REJECTED': 'danger'\n      }\n      return tagMap[status] || 'info'\n    }\n    \n    // 获取用户详情并缓存结果\n    const fetchUserDetail = async (userId) => {\n      // 检查缓存中是否已有该用户信息\n      if (userCache.value.has(userId)) {\n        console.log(`从缓存中获取的用户信息:`, userCache.value.get(userId))\n        return userCache.value.get(userId)\n      }\n      \n      try {\n        console.log(`开始获取用户${userId}信息`)\n        const response = await request.get(`/users/basic/${userId}`)\n        console.log(`获取用户${userId}信息成功:`, response)\n        const userInfo = response?.data || response\n        userCache.value.set(userId, userInfo)\n        return userInfo\n      } catch (error) {\n        console.error(`获取用户${userId}信息失败:`, error)\n        // 返回默认值，避免影响页面显示\n        return { realName: '未知用户', username: '未知用户' }\n      }\n    }\n\n    // 加载成果详情\n    const loadAchievementDetail = async () => {\n      loading.value = true\n      try {\n        const achievementId = route.params.id\n        const response = await request.get(`/achievements/${achievementId}`)\n        \n        if (response.code === 200) {\n          achievement.value = response.data || response\n          \n          // 获取提交者姓名\n          if (achievement.value.submitterId && !achievement.value.submitterName) {\n            const userInfo = await fetchUserDetail(achievement.value.submitterId)\n            achievement.value.submitterName = userInfo.realName || userInfo.username || '未知用户'\n          }\n          \n          // 获取初审审核者姓名\n          if (achievement.value.firstApproval && achievement.value.firstApproval.approverId) {\n            console.log(`尝试获取初审审核者ID: ${achievement.value.firstApproval.approverId} 的真实姓名`)\n            console.log(`当前初审审核者姓名: ${achievement.value.firstApproval.approverName}`)\n            const userInfo = await fetchUserDetail(achievement.value.firstApproval.approverId)\n            console.log(`获取到的用户信息:`, userInfo)\n            achievement.value.firstApproval.approverName = userInfo.realName || userInfo.username || '未知用户'\n            console.log(`更新后初审审核者姓名: ${achievement.value.firstApproval.approverName}`)\n          }\n          \n          // 获取终审审核者姓名\n          if (achievement.value.finalApproval && achievement.value.finalApproval.approverId) {\n            console.log(`尝试获取终审审核者ID: ${achievement.value.finalApproval.approverId} 的真实姓名`)\n            console.log(`当前终审审核者姓名: ${achievement.value.finalApproval.approverName}`)\n            const userInfo = await fetchUserDetail(achievement.value.finalApproval.approverId)\n            console.log(`获取到的用户信息:`, userInfo)\n            achievement.value.finalApproval.approverName = userInfo.realName || userInfo.username || '未知用户'\n            console.log(`更新后终审审核者姓名: ${achievement.value.finalApproval.approverName}`)\n          }\n        }\n      } catch (error) {\n        console.error('加载成果详情失败:', error)\n        ElMessage.error('加载成果详情失败: ' + (error.response?.data?.message || '未知错误'))\n      } finally {\n        loading.value = false\n      }\n    }\n    \n    // 处理返回\n    const handleBack = () => {\n      router.push('/dashboard/achievements')\n    }\n    \n    // 处理附件下载\n    const handleDownload = () => {\n      if (achievement.value?.fileUrl) {\n        window.open(achievement.value.fileUrl, '_blank')\n      } else {\n        ElMessage.warning('没有可下载的附件')\n      }\n    }\n    \n    onMounted(() => {\n      loadAchievementDetail()\n    })\n    \n    return {\n      loading,\n      achievement,\n      showApprovalInfo,\n      formatDateTime,\n      getTypeName,\n      getTypeTag,\n      getLevelName,\n      getLevelTag,\n      getStatusName,\n      getStatusTag,\n      handleBack,\n      handleDownload\n    }\n  }\n}\n</script>\n\n<style scoped>\n.achievement-detail {\n  padding: 20px;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.detail-card {\n  margin-bottom: 20px;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.card-header h3 {\n  margin: 0;\n  font-size: 1.5rem;\n  color: #2c3e50;\n}\n\n.detail-content {\n  margin-top: 20px;\n}\n\n.info-row {\n  display: flex;\n  margin-bottom: 20px;\n  align-items: flex-start;\n}\n\n.label {\n  width: 100px;\n  font-weight: 500;\n  color: #606266;\n  flex-shrink: 0;\n}\n\n.value {\n  flex: 1;\n  color: #303133;\n}\n\n.description {\n  white-space: pre-wrap;\n  line-height: 1.8;\n  padding: 10px;\n  background-color: #f5f7fa;\n  border-radius: 4px;\n}\n\n.loading-container {\n  margin-top: 20px;\n}\n\n.empty-container {\n  margin-top: 40px;\n  text-align: center;\n}\n\n/* 审核信息样式 */\n.approval-info {\n  margin-top: 30px;\n  padding-top: 20px;\n  border-top: 1px solid #ebeef5;\n}\n\n.approval-info h4 {\n  margin-bottom: 15px;\n  color: #2c3e50;\n}\n\n.approval-section {\n  margin-bottom: 20px;\n  padding: 15px;\n  background-color: #fafafa;\n  border-radius: 4px;\n}\n\n.approval-title {\n  font-weight: 500;\n  color: #606266;\n  margin-bottom: 10px;\n}\n\n.approval-content {\n  margin-left: 20px;\n}\n\n.approval-item {\n  margin-bottom: 10px;\n  display: flex;\n  align-items: center;\n}\n\n.approval-label {\n  width: 80px;\n  color: #606266;\n  flex-shrink: 0;\n}\n\n.approval-value {\n  flex: 1;\n  color: #303133;\n}\n</style>","import { render } from \"./AchievementDetail.vue?vue&type=template&id=9b16d58e&scoped=true\"\nimport script from \"./AchievementDetail.vue?vue&type=script&lang=js\"\nexport * from \"./AchievementDetail.vue?vue&type=script&lang=js\"\n\nimport \"./AchievementDetail.vue?vue&type=style&index=0&id=9b16d58e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9b16d58e\"]])\n\nexport default __exports__"],"names":["class","type","handleBack","rows","animated","shadow","header","achievement","title","getStatusTag","status","getStatusName","getTypeTag","getTypeName","getLevelTag","level","getLevelName","submitterName","formatDateTime","createTime","description","size","handleDownload","icon","firstApproval","approved","comment","approvalTime","approverName","finalApproval","name","setup","router","route","store","loading","userCache","Map","userRole","getters","userId","user","id","showApprovalInfo","value","submitterId","dateTime","date","Date","isNaN","getTime","toLocaleString","year","month","day","hour","minute","second","typeMap","tagMap","levelMap","statusMap","fetchUserDetail","async","has","console","log","get","response","request","userInfo","data","set","error","realName","username","loadAchievementDetail","achievementId","params","code","approverId","message","push","fileUrl","window","open","warning","__exports__","render"],"sourceRoot":""}