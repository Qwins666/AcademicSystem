"use strict";(self["webpackChunkacademic_management_frontend"]=self["webpackChunkacademic_management_frontend"]||[]).push([[212],{1212:function(e,a,s){s.r(a),s.d(a,{default:function(){return v}});var l=s(641),t=s(33);const n={class:"layout-container"},d={class:"header-content"},u={class:"header-left"},i={class:"header-right"},r={class:"user-info"},o={class:"user-name"},c={class:"layout-main"};function k(e,a,s,k,b,f){const h=(0,l.g2)("Menu"),m=(0,l.g2)("el-icon"),g=(0,l.g2)("el-button"),_=(0,l.g2)("el-avatar"),p=(0,l.g2)("ArrowDown"),F=(0,l.g2)("User"),v=(0,l.g2)("el-dropdown-item"),W=(0,l.g2)("SwitchButton"),y=(0,l.g2)("el-dropdown-menu"),E=(0,l.g2)("el-dropdown"),x=(0,l.g2)("el-header"),T=(0,l.g2)("House"),C=(0,l.g2)("el-menu-item"),L=(0,l.g2)("Calendar"),w=(0,l.g2)("el-sub-menu"),A=(0,l.g2)("Trophy"),N=(0,l.g2)("FolderOpened"),D=(0,l.g2)("DataAnalysis"),M=(0,l.g2)("UserFilled"),P=(0,l.g2)("el-menu"),I=(0,l.g2)("el-aside"),S=(0,l.g2)("router-view"),U=(0,l.g2)("el-main");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.bF)(x,{class:"layout-header"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",d,[(0,l.Lk)("div",u,[(0,l.bF)(g,{type:"text",onClick:k.toggleSidebar,class:"sidebar-toggle"},{default:(0,l.k6)(()=>[(0,l.bF)(m,null,{default:(0,l.k6)(()=>[(0,l.bF)(h)]),_:1})]),_:1},8,["onClick"]),a[0]||(a[0]=(0,l.Lk)("h1",{class:"system-title"},"学术活动与科研成果管理系统",-1))]),(0,l.Lk)("div",i,[(0,l.bF)(E,{onCommand:k.handleCommand},{dropdown:(0,l.k6)(()=>[(0,l.bF)(y,null,{default:(0,l.k6)(()=>[(0,l.bF)(v,{command:"profile"},{default:(0,l.k6)(()=>[(0,l.bF)(m,null,{default:(0,l.k6)(()=>[(0,l.bF)(F)]),_:1}),a[1]||(a[1]=(0,l.eW)(" 个人中心 ",-1))]),_:1}),(0,l.bF)(v,{command:"logout",divided:""},{default:(0,l.k6)(()=>[(0,l.bF)(m,null,{default:(0,l.k6)(()=>[(0,l.bF)(W)]),_:1}),a[2]||(a[2]=(0,l.eW)(" 退出登录 ",-1))]),_:1})]),_:1})]),default:(0,l.k6)(()=>[(0,l.Lk)("span",r,[(0,l.bF)(_,{size:32,src:k.user?.avatar},{default:(0,l.k6)(()=>[(0,l.eW)((0,t.v_)(k.user?.realName?k.user.realName.charAt(0):"U"),1)]),_:1},8,["src"]),(0,l.Lk)("span",o,(0,t.v_)(k.user?.realName||k.user?.username||"用户"),1),(0,l.bF)(m,{class:"el-icon--right"},{default:(0,l.k6)(()=>[(0,l.bF)(p)]),_:1})])]),_:1},8,["onCommand"])])])]),_:1}),(0,l.Lk)("div",c,[(0,l.bF)(I,{width:k.sidebarWidth,class:"layout-sidebar"},{default:(0,l.k6)(()=>[(0,l.bF)(P,{"default-active":k.activeMenu,collapse:k.isCollapse,"unique-opened":!0,router:"",class:"sidebar-menu"},{default:(0,l.k6)(()=>[(0,l.bF)(C,{index:"/dashboard"},{default:(0,l.k6)(()=>[(0,l.bF)(m,null,{default:(0,l.k6)(()=>[(0,l.bF)(T)]),_:1}),a[3]||(a[3]=(0,l.Lk)("span",null,"首页",-1))]),_:1}),k.hasPermission(["STUDENT","TEACHER","ADMIN"])?((0,l.uX)(),(0,l.Wv)(w,{key:0,index:"activities"},{title:(0,l.k6)(()=>[(0,l.bF)(m,null,{default:(0,l.k6)(()=>[(0,l.bF)(L)]),_:1}),a[4]||(a[4]=(0,l.Lk)("span",null,"学术活动",-1))]),default:(0,l.k6)(()=>[(0,l.bF)(C,{index:"/dashboard/activities"},{default:(0,l.k6)(()=>[...a[5]||(a[5]=[(0,l.eW)("活动列表",-1)])]),_:1}),k.hasPermission(["TEACHER","ADMIN"])?((0,l.uX)(),(0,l.Wv)(C,{key:0,index:"/dashboard/activities/create"},{default:(0,l.k6)(()=>[...a[6]||(a[6]=[(0,l.eW)(" 发布活动 ",-1)])]),_:1})):(0,l.Q3)("",!0)]),_:1})):(0,l.Q3)("",!0),k.hasPermission(["STUDENT","TEACHER","ADMIN"])?((0,l.uX)(),(0,l.Wv)(w,{key:1,index:"achievements"},{title:(0,l.k6)(()=>[(0,l.bF)(m,null,{default:(0,l.k6)(()=>[(0,l.bF)(A)]),_:1}),a[7]||(a[7]=(0,l.Lk)("span",null,"成果申报",-1))]),default:(0,l.k6)(()=>[(0,l.bF)(C,{index:"/dashboard/achievements"},{default:(0,l.k6)(()=>[...a[8]||(a[8]=[(0,l.eW)("成果列表",-1)])]),_:1}),k.hasPermission(["STUDENT"])?((0,l.uX)(),(0,l.Wv)(C,{key:0,index:"/dashboard/achievements/create"},{default:(0,l.k6)(()=>[...a[9]||(a[9]=[(0,l.eW)(" 申报成果 ",-1)])]),_:1})):(0,l.Q3)("",!0)]),_:1})):(0,l.Q3)("",!0),k.hasPermission(["TEACHER","ADMIN"])?((0,l.uX)(),(0,l.Wv)(w,{key:2,index:"projects"},{title:(0,l.k6)(()=>[(0,l.bF)(m,null,{default:(0,l.k6)(()=>[(0,l.bF)(N)]),_:1}),a[10]||(a[10]=(0,l.Lk)("span",null,"科研项目",-1))]),default:(0,l.k6)(()=>[(0,l.bF)(C,{index:"/dashboard/projects"},{default:(0,l.k6)(()=>[...a[11]||(a[11]=[(0,l.eW)("项目列表",-1)])]),_:1}),(0,l.bF)(C,{index:"/dashboard/projects/create"},{default:(0,l.k6)(()=>[...a[12]||(a[12]=[(0,l.eW)("创建项目",-1)])]),_:1})]),_:1})):(0,l.Q3)("",!0),k.hasPermission(["ADMIN"])?((0,l.uX)(),(0,l.Wv)(C,{key:3,index:"/dashboard/statistics"},{default:(0,l.k6)(()=>[(0,l.bF)(m,null,{default:(0,l.k6)(()=>[(0,l.bF)(D)]),_:1}),a[13]||(a[13]=(0,l.Lk)("span",null,"数据统计",-1))]),_:1})):(0,l.Q3)("",!0),k.hasPermission(["ADMIN"])?((0,l.uX)(),(0,l.Wv)(C,{key:4,index:"/dashboard/users"},{default:(0,l.k6)(()=>[(0,l.bF)(m,null,{default:(0,l.k6)(()=>[(0,l.bF)(M)]),_:1}),a[14]||(a[14]=(0,l.Lk)("span",null,"用户管理",-1))]),_:1})):(0,l.Q3)("",!0)]),_:1},8,["default-active","collapse"])]),_:1},8,["width"]),(0,l.bF)(U,{class:"layout-content"},{default:(0,l.k6)(()=>[(0,l.bF)(S)]),_:1})])])}var b=s(953),f=s(5220),h=s(6278),m=s(7918),g=s(163),_={name:"Layout",setup(){const e=(0,f.rd)(),a=(0,f.lq)(),s=(0,h.Pj)(),t=(0,b.KR)(!1),n=(0,l.EW)(()=>s.getters.user||{}),d=(0,l.EW)(()=>s.getters.userRole||"STUDENT"),u=(0,l.EW)(()=>t.value?"64px":"200px"),i=(0,l.EW)(()=>a.path),r=()=>{t.value=!t.value},o=e=>{const a=d.value||"STUDENT";return console.log("当前用户角色:",a,"需要的角色:",e),e.includes(a)},c=a=>{switch(a){case"profile":e.push("/dashboard/profile");break;case"logout":m.s.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{s.dispatch("logout"),e.push("/login"),g.nk.success("已退出登录")});break}};return(0,l.sV)(()=>{s.getters.isLoggedIn||e.push("/login")}),{isCollapse:t,sidebarWidth:u,activeMenu:i,user:n,userRole:d,toggleSidebar:r,hasPermission:o,handleCommand:c}}},p=s(6262);const F=(0,p.A)(_,[["render",k],["__scopeId","data-v-33377c52"]]);var v=F}}]);
//# sourceMappingURL=212.df817ed6.js.map